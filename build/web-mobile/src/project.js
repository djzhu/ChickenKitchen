window.__require=function t(e,i,n){function o(c,r){if(!i[c]){if(!e[c]){var h=c.split("/");if(h=h[h.length-1],!e[h]){var a="function"==typeof __require&&__require;if(!r&&a)return a(h,!0);if(s)return s(h,!0);throw new Error("Cannot find module '"+c+"'")}}var u=i[c]={exports:{}};e[c][0].call(u.exports,function(t){return o(e[c][1][t]||t)},u,u.exports,t,e,i,n)}return i[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<n.length;c++)o(n[c]);return o}({GameManager:[function(t,e,i){"use strict";cc._RF.push(e,"ce17d3IigdAtYkm0qCo534B","GameManager");var n=cc.Class({extends:cc.Component,statics:{instance:null},properties:{},onLoad:function(){n.instance=this,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},onDestroy:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},start:function(){var t=this;this.gold=0,this.cheerTime=!1,this.com_customerManager=cc.find("Canvas/Customer").getComponent("Game_CustomerManager"),this.com_countDown=cc.find("Canvas/UI/ui_countDown").getComponent("UI_CountDown"),this.com_timeBar=cc.find("Canvas/UI/ui_timeBar").getComponent("UI_Timer"),this.com_scoreBar=cc.find("Canvas/UI/ui_goldBar").getComponent("UI_Number"),this.com_play=cc.find("Canvas/UI/ui_play").getComponent("Game_Play"),this.com_rabbit=cc.find("Canvas/UI/ui_rabbit").getComponent("UI_Rabbit"),this.com_settlement=cc.find("Canvas/UI/ui_settlement").getComponent("UI_Settlement"),this.anim_chief=cc.find("Canvas/ch_chief").getComponent(cc.Animation),this.anim_register=cc.find("Canvas/add_register").getComponent(cc.Animation),this.com_settlement.node.active=!1,this.setGameSpeed(1),this.com_customerManager.initCunstomer(function(){}),this.com_countDown.startCountDown(function(){var e=t;t.com_timeBar.init(150,function(){e.setGameSpeed(0),e.com_settlement.node.active=!0,e.com_settlement.init(e.gold,function(){t.com_settlement.node.active=!1,t.setGameSpeed(1),t.com_timeBar.init(50,function(){e.setGameSpeed(0),e.com_settlement.node.active=!0,e.com_settlement.init(e.gold,null)}),t.cooking()})}),t.com_scoreBar.setNumber(t.gold),t.cooking()})},startCheerTime:function(){cc.log("start cheer time"),this.cheerTime=!0,this.setGameSpeed(4)},endCheerTime:function(){cc.log("end cheer time"),this.cheerTime=!1,this.setGameSpeed(1)},setGameSpeed:function(t){this.gameSpeed=t,this.com_customerManager.setSpeed(t)},moveUp:function(t){var e=this,i=this.com_customerManager.satisfyCustomer(t,function(){e.cooking()});i>0&&(this.anim_register.play(),this.gold+=i,this.com_scoreBar.rollNumber(this.gold))},cooking:function(){var t=this;if(0!=this.gameSpeed)if(this.anim_chief.play("anim_chief_cooking"),this.cheerTime){this.anim_chief.play("anim_chief_win");this.moveUp(2)}else this.com_play.playAction(function(e){0==e?t.anim_chief.play("anim_chief_lost"):(t.anim_chief.play("anim_chief_win"),2==e&&t.com_rabbit.onGoodService()),t.moveUp(e)})},update:function(t){},onKeyDown:function(t){switch(t.keyCode){case cc.macro.KEY.a:cc.find("Canvas/add_register").getComponent(cc.Animation).play("anim_register");var e=cc.find("Canvas/Customer").getComponent("Game_CustomerManager").satisfyCustomer(0);this.gold+=e,cc.find("Canvas/UI/ui_scoreBar").getComponent("UI_Number").rollNumber(this.gold);break;case cc.macro.KEY.s:cc.find("Canvas/add_register").getComponent(cc.Animation).play("anim_register");var i=cc.find("Canvas/Customer").getComponent("Game_CustomerManager").satisfyCustomer(1);this.gold+=i,cc.find("Canvas/UI/ui_scoreBar").getComponent("UI_Number").rollNumber(this.gold);break;case cc.macro.KEY.d:cc.find("Canvas/add_register").getComponent(cc.Animation).play("anim_register");var n=cc.find("Canvas/Customer").getComponent("Game_CustomerManager").satisfyCustomer(2);this.gold+=n,cc.find("Canvas/UI/ui_scoreBar").getComponent("UI_Number").rollNumber(this.gold);break;case cc.macro.KEY.c:}}});cc._RF.pop()},{}],Game_Bubble:[function(t,e,i){"use strict";cc._RF.push(e,"9a419tMv8NBlKk72fuxZVHJ","Game_Bubble"),cc.Class({extends:cc.Component,properties:{moodNode:[]},onLoad:function(){this.moodNode=new Array(3);for(var t=0;t<this.moodNode.length;t++)this.moodNode[t]=this.node.getChildByName("add_mood"+t)},setMood:function(t){for(var e=0;e<this.moodNode.length;e++)this.moodNode[e].active=e==t}}),cc._RF.pop()},{}],Game_CustomerManager:[function(t,e,i){"use strict";cc._RF.push(e,"e4d8cR4DPRLsa++gqRMbyo+","Game_CustomerManager"),cc.Class({extends:cc.Component,properties:{customer:[],lineUpPos:[],bubble:null},onLoad:function(){this.customer=new Array(8),this.lineUpPos=new Array(8);for(var t=0;t<this.customer.length;t++)this.customer[t]=this.node.getChildByName("ch_role"+t),this.customer[t].active=!1,this.lineUpPos[t]=new cc.Vec2(this.customer[t].x,this.customer[t].y);this.bubble=this.node.getChildByName("add_bubble"),this.bubble.active=!1,this.bubbleLocPos=new cc.Vec2(18,24),this.moveTime=1},setSpeed:function(t){t>0&&(this.moveTime=1/t)},initCunstomer:function(t){this.currentCustomer=new Array(6);for(var e=0;e<this.currentCustomer.length;e++)this.currentCustomer[e]=this.getRandomCustomer(),this.currentCustomer[e].getComponent("Game_Customer").setTo(this.lineUpPos[e+1].x,this.lineUpPos[e+1].y);this.moveForward(t)},satisfyCustomer:function(t,e){var i=this;this.bubble.active=!0,this.bubble.getComponent("Game_Bubble").setMood(t),this.bubble.parent=this.currentCustomer[0],this.bubble.position=this.bubbleLocPos;var n=this.currentCustomer[0].position,o=this.currentCustomer[0].getComponent("Game_Customer");o.moveTo(2*this.moveTime,n.x+120,n.y,function(){var t=o.node.getChildByName("add_bubble");null!=t&&(t.parent=i.node,t.active=!1),o.node.destroy()});for(var s=0;s<this.currentCustomer.length-1;s++)this.currentCustomer[s]=this.currentCustomer[s+1];return this.currentCustomer[s]=this.getRandomCustomer(),this.currentCustomer[s].getComponent("Game_Customer").setTo(this.lineUpPos[s+1].x,this.lineUpPos[s+1].y),this.moveForward(e),2==t?o.gold:1==t?parseInt(.7*o.gold):0},getRandomCustomer:function(){var t=parseInt(Math.random()*this.customer.length),e=cc.instantiate(this.customer[t]);return e.active=!0,e.parent=this.node,e.setSiblingIndex(0),e},moveForward:function(t){for(var e=this,i=function(){var i=e.currentCustomer[n].getComponent("Game_Customer"),o=n;e.scheduleOnce(function(){i.moveTo(e.moveTime,e.lineUpPos[o].x,e.lineUpPos[o].y,function(){o==e.currentCustomer.length-1&&t()})},.3*n)},n=0;n<this.currentCustomer.length;n++)i()}}),cc._RF.pop()},{}],Game_Customer:[function(t,e,i){"use strict";cc._RF.push(e,"81b1ftM8+lBJJMoJTjBsKSG","Game_Customer"),cc.Class({extends:cc.Component,properties:{gold:{default:0,type:cc.Integer}},onLoad:function(){},setTo:function(t,e){this.node.x=t,this.node.y=e},moveTo:function(t,e,i,n){0==t?cc.error("use setTo instead!!!!!!!!!!!!!!!!!!!!!!!!"):(this.time=t,this.stepX=(e-this.node.x)/t,this.stepY=(i-this.node.y)/t,this.onFinish=n)},update:function(t){this.time>0&&(this.time-=t,this.node.x+=this.stepX*t,this.node.y+=this.stepY*t,this.time<=0&&this.onFinish())}}),cc._RF.pop()},{}],Game_PlayModeClick:[function(t,e,i){"use strict";cc._RF.push(e,"0db0fSvaSJM75ULsG6WG7N8","Game_PlayModeClick"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.value=0,this.limit=0,this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this),this.numbers=new Array(6);for(var t=0;t<this.numbers.length;t++)this.numbers[t]=this.node.getChildByName(t.toString()),this.numbers[t].active=!1;this.node.active=!1},init:function(t,e){this.onFinish=e,this.value=t,this.showNumber(this.value),this.limit=1,this.node.active=!0},showNumber:function(t){for(var e=0;e<this.numbers.length;e++)this.numbers[e].active=e==t},finish:function(t){this.limit=0,this.down=!1,this.node.active=!1,this.onFinish(t)},onClick:function(){this.value--,this.value<=0?this.finish(2):this.showNumber(this.value)},update:function(t){this.limit>0&&(this.limit-=t,this.limit<=0&&this.finish(0))}}),cc._RF.pop()},{}],Game_PlayModePress:[function(t,e,i){"use strict";cc._RF.push(e,"5d518z7XyhJf77hEBccJMkn","Game_PlayModePress"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.down=!1,this.value=0,this.limit=0,this.spr_filler=this.node.getChildByName("filler").getComponent(cc.Sprite),this.node.on(cc.Node.EventType.TOUCH_START,this.onDown,this),this.node.on(cc.Node.EventType.MOUSE_DOWN,this.onDown,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onUp,this),this.node.on(cc.Node.EventType.MOUSE_UP,this.onUp,this),this.node.active=!1},onDown:function(t){this.down=!0,this.limit=0},onUp:function(t){this.down=!1,this.value>.9?this.finish(2):this.value>.7?this.finish(1):this.finish(0)},init:function(t){this.onFinish=t,this.value=0,this.spr_filler.fillRange=this.value,this.limit=2,this.node.active=!0},finish:function(t){this.limit=0,this.down=!1,this.node.active=!1,this.onFinish(t)},update:function(t){this.limit>0&&(this.limit-=t,this.limit<=0&&this.finish(0)),this.down&&(this.value+=t,this.spr_filler.fillRange=this.value>1?1:this.value,this.value>1&&this.finish(0))}}),cc._RF.pop()},{}],Game_PlayModeTouch:[function(t,e,i){"use strict";cc._RF.push(e,"e832bSHbvZPcIoPXjKmQ3uc","Game_PlayModeTouch"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.value=-1,this.valueMin=270,this.valueMax=304,this.limit=0,this.node.on(cc.Node.EventType.TOUCH_START,this.onClick,this),this.node.on(cc.Node.EventType.MOUSE_DOWN,this.onClick,this),this.pointer=this.node.getChildByName("pointer"),this.pointer.rotation=0,this.node.active=!1},init:function(t){this.onFinish=t,this.value=0,this.pointer.rotation=0,this.limit=1,this.node.active=!0},finish:function(t){this.limit=0,this.node.active=!1,this.onFinish(t)},onClick:function(){this.value>this.valueMin&&this.value<this.valueMax?this.finish(2):this.finish(0)},update:function(t){this.limit>0&&(this.limit-=t,this.limit<=0&&this.finish(0)),this.value>=0&&(this.value+=360*t,this.pointer.rotation=this.value)}}),cc._RF.pop()},{}],Game_Play:[function(t,e,i){"use strict";cc._RF.push(e,"01bb546+ONBKINhxhqThedb","Game_Play"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.com_modeClick=this.node.getChildByName("mode_click").getComponent("Game_PlayModeClick"),this.com_modePress=this.node.getChildByName("mode_press").getComponent("Game_PlayModePress"),this.com_modeTouch=this.node.getChildByName("mode_touch").getComponent("Game_PlayModeTouch")},playAction:function(t){var e=3*Math.random();if(e<1){var i=parseInt(5*Math.random()+1);this.com_modeClick.init(i,function(e){t(e)})}else e<2?this.com_modePress.init(function(e){t(e)}):this.com_modeTouch.init(function(e){t(e)})}}),cc._RF.pop()},{}],Study:[function(t,e,i){"use strict";cc._RF.push(e,"073dcCNOahLVruo2Epj+ltN","Study"),cc._RF.pop()},{}],UI_CountDown:[function(t,e,i){"use strict";cc._RF.push(e,"93869/Hn1dDCqRqF1nTppR3","UI_CountDown"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.countDownNode=new Array,this.countDownNode.push(this.node.getChildByName("3")),this.countDownNode.push(this.node.getChildByName("2")),this.countDownNode.push(this.node.getChildByName("1")),this.countDownNode.push(this.node.getChildByName("go")),this.countDownNode[0].active=!1,this.countDownNode[1].active=!1,this.countDownNode[2].active=!1,this.countDownNode[3].active=!1,this.countDownIndex=-1,this.timer=0},startCountDown:function(t){this.countDownIndex=0,this.countDownNode[0].active=!0,this.countDownNode[1].active=!1,this.countDownNode[2].active=!1,this.countDownNode[3].active=!1,this.countDownNode[0].getComponent(cc.Animation).play(),this.onFinish=t},update:function(t){this.countDownIndex>=0&&(this.timer+=t,this.timer>=.5&&(this.timer=0,this.countDownNode[this.countDownIndex].active=!1,this.countDownIndex++,this.countDownIndex<this.countDownNode.length?(this.countDownNode[this.countDownIndex].active=!0,this.countDownNode[this.countDownIndex].getComponent(cc.Animation).play()):(this.countDownIndex=-1,this.onFinish())))}}),cc._RF.pop()},{}],UI_Number:[function(t,e,i){"use strict";cc._RF.push(e,"b43f5axL/REO6gMvE1Q63Xr","UI_Number"),cc.Class({extends:cc.Component,properties:{numberSprites:[],numberSpriteFrames:[]},onLoad:function(){this.numberSprites=new Array(10),this.numberSpriteFrames=new Array(10);for(var t=0;t<10;t++)this.numberSprites[t]=this.node.getChildByName(t.toString()).getComponent(cc.Sprite),this.numberSpriteFrames[t]=this.numberSprites[t].spriteFrame;this.currentNumber=0,this.targetNumber=0,this.setNumber(0)},setNumber:function(t){this.targetNumber=t,this.updateNumber(t)},rollNumber:function(t){this.targetNumber=t},updateNumber:function(t){t=parseInt(t),this.currentNumber=t;var e=new Array;if(0==t)e.push(0);else for(;t>0&&e.length<10;){var i=t%10;e.push(i),t=parseInt(t/10)}for(var n=0;n<this.numberSprites.length;n++)n<e.length?(this.numberSprites[n].node.active||(this.numberSprites[n].node.active=!0),this.numberSprites[n].spriteFrame=this.numberSpriteFrames[e[n]]):this.numberSprites[n].node.active&&(this.numberSprites[n].node.active=!1)},update:function(t){if(this.currentNumber!=this.targetNumber){var e=.9*this.currentNumber+.1*this.targetNumber;this.currentNumber<this.targetNumber&&e<this.currentNumber+1?e=this.currentNumber+1:this.currentNumber>this.targetNumber&&e>this.currentNumber-1&&(e=this.currentNumber-1),this.updateNumber(e)}}}),cc._RF.pop()},{}],UI_Rabbit:[function(t,e,i){"use strict";cc._RF.push(e,"de1b2Ip9jZHrZLoFxHkR2sm","UI_Rabbit");var n=t("GameManager");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.activeCount=10,this.lastTime=12,this.anim_btnRabbit=this.node.getChildByName("btn_rabbit").getComponent(cc.Animation),this.cheerRabbit=this.node.getChildByName("anim_rabbit"),this.cheerRabbit.active=!1,this.counter=0,this.timer=0},onGoodService:function(){this.counter<this.activeCount&&(this.counter++,this.counter>=this.activeCount&&this.anim_btnRabbit.play())},onClick_Rabbit:function(){this.counter>=this.activeCount&&(this.counter=0,this.anim_btnRabbit.stop(),this.cheerRabbit.active=!0,this.timer=this.lastTime,n.instance.startCheerTime())},update:function(t){this.timer>0&&(this.timer-=t,this.timer<=0&&(this.cheerRabbit.active=!1,n.instance.endCheerTime()))}}),cc._RF.pop()},{GameManager:"GameManager"}],UI_Settlement:[function(t,e,i){"use strict";cc._RF.push(e,"fb994e8g9tEA4YG9lnfImn0","UI_Settlement"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.com_score=this.node.getChildByName("ui_scoreBar").getComponent("UI_Number"),this.btn_continue=this.node.getChildByName("btn_continue")},init:function(t,e){this.com_score.setNumber(t),this.onContinue=e,null==this.onContinue&&(this.btn_continue.active=!1)},onClick_continue:function(){null!=this.onContinue&&this.onContinue()}}),cc._RF.pop()},{}],UI_Timer:[function(t,e,i){"use strict";cc._RF.push(e,"f6e920GAJVMiLNSZUoXpvaW","UI_Timer"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.barSpriteNode=this.node.getChildByName("ui_bar"),this.originX=this.barSpriteNode.x,this.originW=this.barSpriteNode.width,this.currentRate=1},init:function(t,e){this.time=t,this.totalTime=t,this.onFinish=e},setRate:function(t){this.currentRate=t,this.barSpriteNode.width=this.originW*t,this.barSpriteNode.x=this.originX-.5*(this.originW-this.barSpriteNode.width)},update:function(t){if(this.time>0)if(this.time-=t,this.time>=0){var e=this.time/this.totalTime;this.setRate(e)}else this.setRate(0),null!=this.onFinish&&this.onFinish()}}),cc._RF.pop()},{}]},{},["GameManager","Game_Bubble","Game_Customer","Game_CustomerManager","Game_Play","Game_PlayModeClick","Game_PlayModePress","Game_PlayModeTouch","Study","UI_CountDown","UI_Number","UI_Rabbit","UI_Settlement","UI_Timer"]);