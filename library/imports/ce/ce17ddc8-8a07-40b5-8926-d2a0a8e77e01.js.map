{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\GameManager.js"],"names":["cc","Class","extends","Component","properties","onLoad","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","onDestroy","start","gold","find","getComponent","initCunstomer","startCountDown","init","onTimeOver","setNumber","Animation","play","playAction","result","satisfyCustomer","rollNumber","log","event","keyCode","macro","KEY","a","s","d","c"],"mappings":"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","file":"GameManager.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["\r\ncc.Class({\r\n\textends: cc.Component,\r\n\r\n\tproperties: {\r\n\t},\r\n\r\n\tonLoad() {\r\n\t\tcc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n\t},\r\n\tonDestroy() {\r\n\t\tcc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n\t},\r\n\r\n\tstart() {\r\n\t\tthis.gold = 0;\r\n\r\n\t\t// 顾客入场\r\n\t\tcc.find(\"Canvas/Customer\").getComponent(\"Game_CustomerManager\").initCunstomer();\r\n\t\t// 3 2 1 go\r\n\t\tcc.find(\"Canvas/UI/ui_countDown\").getComponent(\"UI_CountDown\").startCountDown(() => {\r\n\t\t\t//cc.log(\"->>>> count down finish\");\r\n\t\t\t// 走时间\r\n\t\t\tcc.find(\"Canvas/UI/ui_timeBar\").getComponent(\"UI_Timer\").init(150, this.onTimeOver);\r\n\t\t\t// 初始化金币\r\n\t\t\tcc.find(\"Canvas/UI/ui_scoreBar\").getComponent(\"UI_Number\").setNumber(this.gold);\r\n\t\t\t// 烧菜\r\n\t\t\tcc.find(\"Canvas/ch_chief\").getComponent(cc.Animation).play(\"anim_chief_cooking\"); // 厨师烧菜动画 loop\r\n\t\t\t// 互动\r\n\t\t\tcc.find(\"Canvas/UI/ui_play\").getComponent(\"Game_Play\").playAction((result) => {\r\n\t\t\t\t//cc.log(\"+++>\" + result);\r\n\t\t\t\tif (result == 0) {\r\n\t\t\t\t\tcc.find(\"Canvas/ch_chief\").getComponent(cc.Animation).play(\"anim_chief_lost\"); // 厨师失败动画\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcc.find(\"Canvas/ch_chief\").getComponent(cc.Animation).play(\"anim_chief_win\"); // 厨师胜利动画\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcc.find(\"Canvas/add_register\").getComponent(cc.Animation).play(\"anim_register\"); // 收银机动画\r\n\t\t\t\t\r\n\t\t\t\t // 走一个顾客并计算收益\r\n\t\t\t\tlet gold = cc.find(\"Canvas/Customer\").getComponent(\"Game_CustomerManager\").satisfyCustomer(0);\r\n\t\t\t\tthis.gold += gold;\r\n\t\t\t\tcc.find(\"Canvas/UI/ui_scoreBar\").getComponent(\"UI_Number\").rollNumber(this.gold);\r\n\t\t\t});\r\n\t\t});\r\n\t\t// 操作 - 厨师动画 收钱 走一个 下一个\r\n\t\t// cc.find(\"Canvas/ch_chief\").getComponent(cc.Animation).play(\"anim_chief_cooking\"); // 厨师烧菜动画 loop\r\n\t\t// cc.find(\"Canvas/ch_chief\").getComponent(cc.Animation).play(\"anim_chief_win\"); // 厨师胜利动画\r\n\t\t// cc.find(\"Canvas/ch_chief\").getComponent(cc.Animation).play(\"anim_chief_lost\"); // 厨师失败动画\r\n\t\t// 时间到结算\r\n\r\n\t},\r\n\r\n\t// 时间结束\r\n\tonTimeOver() {\r\n\t\tcc.log(\"Time Over!!\");\r\n\t},\r\n\r\n\tonKeyDown(event) {\r\n\t\tswitch (event.keyCode) {\r\n\t\t\tcase cc.macro.KEY.a: {\r\n\t\t\t\tcc.find(\"Canvas/add_register\").getComponent(cc.Animation).play(\"anim_register\"); // 收银机动画\r\n\t\t\t\tlet gold = cc.find(\"Canvas/Customer\").getComponent(\"Game_CustomerManager\").satisfyCustomer(0); // 走一个顾客并计算收益\r\n\t\t\t\tthis.gold += gold;\r\n\t\t\t\tcc.find(\"Canvas/UI/ui_scoreBar\").getComponent(\"UI_Number\").rollNumber(this.gold);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase cc.macro.KEY.s: {\r\n\t\t\t\tcc.find(\"Canvas/add_register\").getComponent(cc.Animation).play(\"anim_register\");\r\n\t\t\t\tlet gold = cc.find(\"Canvas/Customer\").getComponent(\"Game_CustomerManager\").satisfyCustomer(1);\r\n\t\t\t\tthis.gold += gold;\r\n\t\t\t\tcc.find(\"Canvas/UI/ui_scoreBar\").getComponent(\"UI_Number\").rollNumber(this.gold);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase cc.macro.KEY.d: {\r\n\t\t\t\tcc.find(\"Canvas/add_register\").getComponent(cc.Animation).play(\"anim_register\");\r\n\t\t\t\tlet gold = cc.find(\"Canvas/Customer\").getComponent(\"Game_CustomerManager\").satisfyCustomer(2);\r\n\t\t\t\tthis.gold += gold;\r\n\t\t\t\tcc.find(\"Canvas/UI/ui_scoreBar\").getComponent(\"UI_Number\").rollNumber(this.gold);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase cc.macro.KEY.c: {\r\n\t\t\t\t//cc.find(\"Canvas/UI/ui_countDown\").getComponent(\"UI_CountDown\").startCountDown(() => { cc.log(\"->>>> count down finish\"); });\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// update (dt) {},\r\n});\r\n"]}