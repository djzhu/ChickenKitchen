{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\UI/assets\\Script\\UI\\UI_Number.js"],"names":["cc","Class","extends","Component","properties","numberSprites","numberSpriteFrames","onLoad","count","Array","i","node","getChildByName","toString","getComponent","Sprite","spriteFrame","currentNumber","targetNumber","setNumber","number","updateNumber","rollNumber","parseInt","ns","push","length","m","active","update","dt"],"mappings":"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","file":"UI_Number.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\UI","sourcesContent":["\r\ncc.Class({\r\n\textends: cc.Component,\r\n\r\n\tproperties: {\r\n\t\tnumberSprites: [], // 0-9 sprite节点\r\n\t\tnumberSpriteFrames: [], // 0-9 spriteFrame\r\n\t},\r\n\r\n\tonLoad() {\r\n\t\tvar count = 10;\r\n\t\tthis.numberSprites = new Array(count);\r\n\t\tthis.numberSpriteFrames = new Array(count);\r\n\t\tfor (var i = 0; i < count; i++) {\r\n\t\t\tthis.numberSprites[i] = this.node.getChildByName(i.toString()).getComponent(cc.Sprite);\r\n\t\t\tthis.numberSpriteFrames[i] = this.numberSprites[i].spriteFrame;\r\n\t\t}\r\n\r\n\t\tthis.currentNumber = 0;\r\n\t\tthis.targetNumber = 0;\r\n\t\tthis.setNumber(0);\r\n\t\t//this.rollNumber(100);\r\n\t},\r\n\r\n\t// 直接设置一个数字\r\n\tsetNumber(number) {\r\n\t\tthis.targetNumber = number;\r\n\t\tthis.updateNumber(number);\r\n\t},\r\n\r\n\t// 从当前数字跳动变化到目标数字\r\n\trollNumber(number) {\r\n\t\tthis.targetNumber = number;\r\n\t},\r\n\r\n\t// 更新数字\r\n\tupdateNumber(number) {\r\n\t\tnumber = parseInt(number);\r\n\t\tthis.currentNumber = number;\r\n\r\n\t\tvar ns = new Array();\r\n\t\tif (number == 0) {\r\n\t\t\tns.push(0);\r\n\t\t} else {\r\n\t\t\twhile (number > 0 && ns.length < 10) {\r\n\t\t\t\tvar m = number % 10;\r\n\t\t\t\tns.push(m);\r\n\t\t\t\tnumber = parseInt(number / 10);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < this.numberSprites.length; i++) {\r\n\t\t\tif (i < ns.length) {\r\n\t\t\t\tif (!this.numberSprites[i].node.active) {\r\n\t\t\t\t\tthis.numberSprites[i].node.active = true;\r\n\t\t\t\t}\r\n\t\t\t\tthis.numberSprites[i].spriteFrame = this.numberSpriteFrames[ns[i]];\r\n\t\t\t} else {\r\n\t\t\t\tif (this.numberSprites[i].node.active) {\r\n\t\t\t\t\tthis.numberSprites[i].node.active = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tupdate(dt) {\r\n\t\tif (this.currentNumber != this.targetNumber) {\r\n\t\t\tvar number = this.currentNumber * 0.9 + this.targetNumber * 0.1;\r\n\t\t\tif (this.currentNumber < this.targetNumber && number < this.currentNumber + 1) {\r\n\t\t\t\tnumber = this.currentNumber + 1;\r\n\t\t\t} else if (this.currentNumber > this.targetNumber && number > this.currentNumber - 1) {\r\n\t\t\t\tnumber = this.currentNumber - 1;\r\n\t\t\t}\r\n\t\t\tthis.updateNumber(number);\r\n\t\t}\r\n\t},\r\n\r\n});\r\n"]}