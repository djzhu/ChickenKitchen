{"version":3,"sources":["Util_Timer.js"],"names":["cc","Class","extends","Component","properties","barSpriteNode","Node","start","originX","x","originW","width","currentRate","init","time","onFinish","totalTime","setRate","rate","update","dt"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACRC,UAASF,GAAGG,SADJ;;AAGRC,aAAY;AACXC,iBAAeL,GAAGM;AADP,EAHJ;;AAORC,MAPQ,mBAOA;AACP,OAAKC,OAAL,GAAe,KAAKH,aAAL,CAAmBI,CAAlC;AACA,OAAKC,OAAL,GAAe,KAAKL,aAAL,CAAmBM,KAAlC;AACA,OAAKC,WAAL,GAAmB,CAAnB;;AAEA;AACA,EAbO;AAeRC,KAfQ,gBAeHC,IAfG,EAeGC,QAfH,EAea;AACpB,OAAKD,IAAL,GAAYA,IAAZ;AACA,OAAKE,SAAL,GAAiBF,IAAjB;AACA,OAAKC,QAAL,GAAgBA,QAAhB;AACA,EAnBO;AAqBRE,QArBQ,mBAqBAC,IArBA,EAqBM;AACb,OAAKN,WAAL,GAAmBM,IAAnB;AACA,OAAKb,aAAL,CAAmBM,KAAnB,GAA2B,KAAKD,OAAL,GAAeQ,IAA1C;AACA,OAAKb,aAAL,CAAmBI,CAAnB,GAAuB,KAAKD,OAAL,GAAe,CAAC,KAAKE,OAAL,GAAe,KAAKL,aAAL,CAAmBM,KAAnC,IAA0C,GAAhF;AACA,EAzBO;AA2BRQ,OA3BQ,kBA2BAC,EA3BA,EA2BI;AACX,MAAI,KAAKN,IAAL,GAAY,CAAhB,EAAmB;AAClB,QAAKA,IAAL,IAAaM,EAAb;AACA,OAAI,KAAKN,IAAL,IAAa,CAAjB,EAAoB;AACnB,QAAII,OAAO,KAAKJ,IAAL,GAAY,KAAKE,SAA5B;AACA,SAAKC,OAAL,CAAaC,IAAb;AACA,IAHD,MAGO;AACN,SAAKD,OAAL,CAAa,CAAb;AACA,QAAI,KAAKF,QAAL,IAAiB,IAArB,EAA2B;AAC1B,UAAKA,QAAL;AACA;AACD;AACD;AACD;AAxCO,CAAT","file":"Util_Timer.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Util","sourcesContent":["\r\ncc.Class({\r\n\textends: cc.Component,\r\n\r\n\tproperties: {\r\n\t\tbarSpriteNode: cc.Node,\r\n\t},\r\n\r\n\tstart() {\r\n\t\tthis.originX = this.barSpriteNode.x;\r\n\t\tthis.originW = this.barSpriteNode.width;\r\n\t\tthis.currentRate = 1;\r\n\r\n\t\t//this.init(10, ()=>{cc.log(\"->>>> onFinish!\");});\r\n\t},\r\n\r\n\tinit(time, onFinish) {\r\n\t\tthis.time = time;\r\n\t\tthis.totalTime = time;\r\n\t\tthis.onFinish = onFinish;\r\n\t},\r\n\r\n\tsetRate(rate) {\r\n\t\tthis.currentRate = rate;\r\n\t\tthis.barSpriteNode.width = this.originW * rate;\r\n\t\tthis.barSpriteNode.x = this.originX - (this.originW - this.barSpriteNode.width)*0.5;\r\n\t},\r\n\r\n\tupdate (dt) {\r\n\t\tif (this.time > 0) {\r\n\t\t\tthis.time -= dt;\r\n\t\t\tif (this.time >= 0) {\r\n\t\t\t\tvar rate = this.time / this.totalTime;\r\n\t\t\t\tthis.setRate(rate);\r\n\t\t\t} else {\r\n\t\t\t\tthis.setRate(0);\r\n\t\t\t\tif (this.onFinish != null) {\r\n\t\t\t\t\tthis.onFinish();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n});\r\n"]}