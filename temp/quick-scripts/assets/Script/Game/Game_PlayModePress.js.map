{"version":3,"sources":["Game_PlayModePress.js"],"names":["cc","Class","extends","Component","properties","onLoad","down","value","limit","spr_filler","node","getChildByName","getComponent","Sprite","on","Node","EventType","TOUCH_START","event","TOUCH_END","finish","active","init","onFinish","fillRange","score","update","dt"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACRC,UAASF,GAAGG,SADJ;;AAGRC,aAAY,EAHJ;;AAMRC,OANQ,oBAMC;AAAA;;AACR,OAAKC,IAAL,GAAY,KAAZ;AACA,OAAKC,KAAL,GAAa,CAAb;AACA,OAAKC,KAAL,GAAa,CAAb,CAHQ,CAGQ;;AAEhB,OAAKC,UAAL,GAAkB,KAAKC,IAAL,CAAUC,cAAV,CAAyB,QAAzB,EAAmCC,YAAnC,CAAgDZ,GAAGa,MAAnD,CAAlB;;AAEA,OAAKH,IAAL,CAAUI,EAAV,CAAad,GAAGe,IAAH,CAAQC,SAAR,CAAkBC,WAA/B,EAA4C,UAACC,KAAD,EAAW;AACtD,SAAKZ,IAAL,GAAY,IAAZ;AACA,SAAKE,KAAL,GAAa,CAAb;AACA,GAHD,EAGG,IAHH;;AAKA,OAAKE,IAAL,CAAUI,EAAV,CAAad,GAAGe,IAAH,CAAQC,SAAR,CAAkBG,SAA/B,EAA0C,UAACD,KAAD,EAAW;AACpD,SAAKZ,IAAL,GAAY,KAAZ;AACA,OAAI,MAAKC,KAAL,GAAa,GAAjB,EAAqB;AACpB,UAAKa,MAAL,CAAY,CAAZ;AACA,IAFD,MAEO,IAAI,MAAKb,KAAL,GAAa,GAAjB,EAAqB;AAC3B,UAAKa,MAAL,CAAY,CAAZ;AACA,IAFM,MAEA;AACN,UAAKA,MAAL,CAAY,CAAZ;AACA;AACD,GATD,EASG,IATH;;AAWA,OAAKV,IAAL,CAAUW,MAAV,GAAmB,KAAnB;AACA,EA9BO;AAgCRC,KAhCQ,gBAgCHC,QAhCG,EAgCO;AACd,OAAKA,QAAL,GAAgBA,QAAhB;AACA,OAAKhB,KAAL,GAAa,CAAb;AACA,OAAKE,UAAL,CAAgBe,SAAhB,GAA4B,KAAKjB,KAAjC;AACA,OAAKC,KAAL,GAAa,CAAb;AACA,OAAKE,IAAL,CAAUW,MAAV,GAAmB,IAAnB;AACA,EAtCO;AAwCRD,OAxCQ,kBAwCDK,KAxCC,EAwCM;AACb,OAAKjB,KAAL,GAAa,CAAb;AACA,OAAKF,IAAL,GAAY,KAAZ;AACA,OAAKI,IAAL,CAAUW,MAAV,GAAmB,KAAnB;AACA,OAAKE,QAAL,CAAcE,KAAd;AACA,EA7CO;AA+CRC,OA/CQ,kBA+CDC,EA/CC,EA+CG;AACV,MAAI,KAAKnB,KAAL,GAAa,CAAjB,EAAoB;AACnB,QAAKA,KAAL,IAAcmB,EAAd;AACA,OAAI,KAAKnB,KAAL,IAAc,CAAlB,EAAqB;AACpB,SAAKY,MAAL,CAAY,CAAZ,EADoB,CACJ;AAChB;AACD;;AAED,MAAI,KAAKd,IAAT,EAAe;AACd,QAAKC,KAAL,IAAcoB,EAAd;AACA,QAAKlB,UAAL,CAAgBe,SAAhB,GAA4B,KAAKjB,KAAL,GAAa,CAAb,GAAiB,CAAjB,GAAqB,KAAKA,KAAtD;AACA,OAAI,KAAKA,KAAL,GAAa,CAAjB,EAAoB;AACnB,SAAKa,MAAL,CAAY,CAAZ,EADmB,CACH;AAChB;AACD;AACD;AA9DO,CAAT","file":"Game_PlayModePress.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Game","sourcesContent":["\r\ncc.Class({\r\n\textends: cc.Component,\r\n\r\n\tproperties: {\r\n\t},\r\n\r\n\tonLoad() {\r\n\t\tthis.down = false;\r\n\t\tthis.value = 0;\r\n\t\tthis.limit = 0; // 操作限时\r\n\r\n\t\tthis.spr_filler = this.node.getChildByName(\"filler\").getComponent(cc.Sprite);\r\n\r\n\t\tthis.node.on(cc.Node.EventType.TOUCH_START, (event) => {\r\n\t\t\tthis.down = true;\r\n\t\t\tthis.limit = 0;\r\n\t\t}, this);\r\n\r\n\t\tthis.node.on(cc.Node.EventType.TOUCH_END, (event) => {\r\n\t\t\tthis.down = false;\r\n\t\t\tif (this.value > 0.9){\r\n\t\t\t\tthis.finish(2);\r\n\t\t\t} else if (this.value > 0.7){\r\n\t\t\t\tthis.finish(1);\r\n\t\t\t} else {\r\n\t\t\t\tthis.finish(0);\r\n\t\t\t}\r\n\t\t}, this);\r\n\r\n\t\tthis.node.active = false;\r\n\t},\r\n\r\n\tinit(onFinish) {\r\n\t\tthis.onFinish = onFinish;\r\n\t\tthis.value = 0;\r\n\t\tthis.spr_filler.fillRange = this.value;\r\n\t\tthis.limit = 2;\r\n\t\tthis.node.active = true;\r\n\t},\r\n\r\n\tfinish(score) {\r\n\t\tthis.limit = 0;\r\n\t\tthis.down = false;\r\n\t\tthis.node.active = false;\r\n\t\tthis.onFinish(score);\r\n\t},\r\n\r\n\tupdate(dt) {\r\n\t\tif (this.limit > 0) {\r\n\t\t\tthis.limit -= dt;\r\n\t\t\tif (this.limit <= 0) {\r\n\t\t\t\tthis.finish(0); // 操作限时\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.down) {\r\n\t\t\tthis.value += dt;\r\n\t\t\tthis.spr_filler.fillRange = this.value > 1 ? 1 : this.value;\r\n\t\t\tif (this.value > 1) {\r\n\t\t\t\tthis.finish(0); // 超界\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n});\r\n"]}